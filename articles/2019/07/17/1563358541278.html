<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="theme-color" content="#3b3e43"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"/><title>webpack——从构建项目到优化 - 亚美大前端（FED）</title><meta name="description" content="webpack在前端项目中的应用——从构建项目到优化"/><meta property="og:description" content="webpack在前端项目中的应用——从构建项目到优化"/>    <meta name="keywords" content="YM,亚美,前端,博客"/><link rel="dns-prefetch" href="https://ymfed.github.io"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://ymfed.github.io"><link rel="icon" type="image/png" href="http://fed.ym/images/czh-fed-logo.png"/><link rel="apple-touch-icon" href="http://fed.ym/images/czh-fed-logo.png"><link rel="shortcut icon" type="image/x-icon" href="http://fed.ym/images/czh-fed-logo.png"><meta name="copyright" content="B3log"/><meta http-equiv="Window-target" content="_top"/><meta property="og:locale" content="zh_CN"/><meta property="og:title" content="webpack——从构建项目到优化 - 亚美大前端（FED）"/><meta property="og:site_name" content="亚美大前端（FED）"/><meta property="og:url"      content="https://ymfed.github.io/articles/2019/07/17/1563358541278.html?"/><meta property="og:image" content="http://fed.ym/images/czh-fed-logo.png"/><link rel="search" type="application/opensearchdescription+xml" title="webpack——从构建项目到优化 - 亚美大前端（FED）" href="/opensearch.xml"><link href="https://ymfed.github.io/rss.xml" title="RSS" type="application/rss+xml" rel="alternate"/><link rel="manifest" href="https://ymfed.github.io/manifest.json">        <link rel="canonical" href="https://ymfed.github.io/articles/2019/07/17/1563358541278.html">        <link rel="stylesheet"
              href="https://ymfed.github.io/skins/9IPHP/css/base.css?1585645466987"/>
            <link rel="prev" title="Web Workers 干货！！" href="https://ymfed.github.io/articles/2019/07/05/1562324937961.html">
            <link rel="next" title="CSS 渲染：CSS 是如何绘制颜色的？" href="https://ymfed.github.io/articles/2019/07/18/1563454497520.html">
    </head>
<body>
<header>
    <div class="banner">
        <div class="fn-clear wrapper">
            <a href="https://ymfed.github.io" class="logo" rel="start"></a>
            <h2 class="subtitle-wrap">
                <p class="subtitle">亚美大前端（FED）</p>
                <p class="description">既要埋头干事，也要抬头看路</p>
            </h2>
            <div class="fn-right">
                    <a class="fn__flex-inline" href="https://ymfed.github.io/start">
                        <i class="icon-login"></i>&nbsp;开始使用
                    </a>
            </div>
        </div>
    </div>

    <div class="navbar">
        <div class="fn-clear wrapper">
            <nav class="fn-left">
                <a href="https://ymfed.github.io">
                    <i class="icon-home"></i>
                    首页
                </a>
                <a href="https://ymfed.github.io/tags.html" rel="section">
                    <i class="icon-tags"></i> 标签墙
                </a>
                <a href="https://ymfed.github.io/archives.html">
                    <i class="icon-inbox"></i> 存档
                </a>
                <a rel="archive" href="https://ymfed.github.io/links.html">
                    <i class="icon-link"></i> 友情链接
                </a>
                <a rel="archive" href="https://ymfed.github.io/team.html">
                    <i class="icon-category"></i> 团队介绍
                </a>
                <a rel="archive" href="https://ymfed.github.io/join.html">
                    <i class="icon-register"></i> 加入我们
                </a>
            </nav>
            <div class="fn-right">
                <form class="form" action="https://ymfed.github.io/search">
                    <input placeholder="搜索" id="search" type="text" name="keyword"/>
                    <button type="submit"><i class="icon-search"></i></button>
                </form>
            </div>
        </div>
    </div>
</header>
<div class="responsive fn-none">
    <i class="icon-list"></i>
    <ul class="list">
                <li>
                    <a href="https://ymfed.github.io/start">
                        <i class="icon-login"></i> 开始使用
                    </a>
                </li>
        <li>
            <a href="https://ymfed.github.io">
                <i class="icon-home"></i>
                首页
            </a>
        </li>
        <li>
            <a href="https://ymfed.github.io/tags.html" rel="section">
                <i class="icon-tags"></i> 标签墙
            </a>
        </li>
        <li>
            <a href="https://ymfed.github.io/archives.html">
                <i class="icon-inbox"></i> 存档
            </a>
        </li>
        <li>
            <a rel="archive" href="https://ymfed.github.io/links.html">
                <i class="icon-link"></i> 友情链接
            </a>
        </li>
        <li>
            <a rel="archive" href="https://ymfed.github.io/team.html">
                <i class="icon-category"></i> 团队介绍
            </a>
        </li>
        <li>
            <a rel="archive" href="https://ymfed.github.io/join.html">
                <i class="icon-register"></i> 加入我们
            </a>
        </li>
    </ul>
</div><div class="wrapper">
    <div class="main-wrap">
        <main>
            <article class="post">
                <header>
                    <h2>
                        <a rel="bookmark" href="https://ymfed.github.io/articles/2019/07/17/1563358541278.html">
                            webpack——从构建项目到优化
                        </a>
                    </h2>
                    <div class="meta">
                                <span class="vditor-tooltipped vditor-tooltipped__n"
                                      aria-label="更新日期">
                                    <i class="icon-date"></i>
                                    <time>
                                    2019-07-22
                                    </time>
                                </span>
                        &nbsp; | &nbsp;
                        <span class="vditor-tooltipped vditor-tooltipped__n" aria-label="评论数">
                                    <i class="icon-comments"></i>
                                    <a href="https://ymfed.github.io/articles/2019/07/17/1563358541278.html#b3logsolocomments">
                                        <span data-uvstatcmt="1563358541278">0</span> 评论</a>
                                </span>
                        &nbsp; | &nbsp;
                        <span class="vditor-tooltipped vditor-tooltipped__n" aria-label="浏览数">
                                    <i class="icon-views"></i>
                        <span data-uvstaturl="https://ymfed.github.io/articles/2019/07/17/1563358541278.html">88</span> 浏览
                                </span>
                    </div>
                </header>

                <div class="vditor-reset post__content">
                    <h3 id="toc_h3_0">webpack4 搭建一个项目</h3>
<h3 id="toc_h3_1">1、新建项目</h3>
<p>新建一个空文件夹，用于创建项目，使用 npm init 命令创建一个 package.json 文件。<br>
输入这个命令后，终端会问你一系列诸如项目名称，项目描述，作者等信息，也可以使用 npm init -y 这个命令来一次生成 package.json 文件，这样终端不会询问你问题。</p>
<h3 id="toc_h3_2">2、安装 webpack</h3>
<p>安装 webapck 时把 webpack-cli 也装上是因为在 webpack4.x 版本后 webpack 模块把一些功能分到了 webpack-cli 模块，所以两者都需要安装，安装方法如下：</p>
<pre><code class="language-javascript">npm install webpack webpack-cli --global //这是安装全局webpack及webpack-cli模块
npm install webpack webpack-cli --save-dev //这是安装本地项目模块
</code></pre>
<h3 id="toc_h3_3">3、新建文件</h3>
<p>在根目录件夹中新建两个文件夹，分别为 src 文件夹和 dist 文件夹，接下来再创建三个文件:此时，项目结构如下</p>
<ul>
<li>index.html --放在 dist 文件夹中；</li>
<li>hello.js --放在 src 文件夹中；</li>
<li>index.js --放在 src 文件夹中；</li>
</ul>
<h4 id="toc_h4_4">3.1、 index.html 中写下 html 代码，它的作用是为了引入我们打包后的 js 文件：</h4>
<pre><code class="language-html">
&lt;html  lang="en"&gt;
&lt;head&gt;
&lt;meta  charset="UTF-8" /&gt;
&lt;title&gt;Webpack Project&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div  id="root"&gt;&lt;/div&gt;
&lt;script  src="bundle.js"&gt;&lt;/script&gt;
&lt;!--这是打包之后的js文件，我们暂时命名为bundle.js--&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>
<h4 id="toc_h4_5">3.2、在 hello.js 中导出一个模块：</h4>
<pre><code class="language-js">// hello.js
module.exports = function() {
  let hello = document.createElement('div')
  hello.innerHTML = 'welcome to China!'
  return hello
}
</code></pre>
<h4 id="toc_h4_6">3.3、在 index.js 中引入这个模块（hello.js）:</h4>
<pre><code class="language-js">//index.js
const hello = require('./hello.js')
document.querySelector('#root').appendChild(hello())
</code></pre>
<p>上述操作就相当于我们把 hello.js 模块合并到了 index.js 模块，之后我们打包时就只需把 index.js 模块打包成 bundle.js 即可。</p>
<h4 id="toc_h4_7">3.4、进行最简单的 webpack 打包</h4>
<pre><code class="language-javascript">// 在终端中使用如下命令进行打包：
webpack src/index.js --output dist/bundle.js
</code></pre>
<p>上述就相当于把 src 文件夹下的 index.js 文件打包到 dist 文件下的 bundle.js，这时就生成了 bundle.js 供 index.html 文件引用。现在打开 index.html 就可以看到我们的页面了。</p>
<h3 id="toc_h3_8">4、配置 webpack.config.js</h3>
<p>上述打包方式太 low 了，我们可以在当前项目的根目录下新建一个配置文件 webpack.config.js 用来配置打包方式。</p>
<p>webpack.config.js 配置如下</p>
<pre><code class="language-js">const path = require('path') // 处理绝对路径
module.exports = {
  entry: path.join(__dirname, '/src/index.js'), // 入口文件
  output: {
    path: path.join(__dirname, '/dist'), //打包后的文件存放的地方
    filename: 'bundle.js' //打包后输出文件的文件名
  }
}
</code></pre>
<p>有了这个配置文件，我们只需在终端中运行 webpack 命令就可进行打包，这条命令会自动引用 webpack.config.js 文件中的配置选项。</p>
<h3 id="toc_h3_9">5、构建本地服务器</h3>
<p>现在我们是通过打开本地文件来查看页面的，感觉还是有点 low。例如 vue, react 等脚手架都是在本地服务器运行的。所以我们再做进一步优化。</p>
<h4 id="toc_h4_10">5.1 webpack-dev-server 配置本地服务器</h4>
<p>Webpack 提供了一个可选的本地开发服务器，这个本地服务器基于 node.js 构建，它是一个单独的组件，在 webpack 中进行配置之前需要单独安装它作为项目依赖：npm i webpack-dev-server -D</p>
<p>以下是 devServer 的一些配置选项:</p>
<ul>
<li>contentBase ：设置服务器所读取文件的目录，当前我们设置为"./dist"</li>
<li>port ：设置端口号，如果省略，默认为 8080</li>
<li>inline ：设置为 true，当源文件改变时会自动刷新页面</li>
<li>historyApiFallback ：设置为 true，所有的跳转将指向 index.html</li>
</ul>
<p>现在我们把这些配置加到 webpack.config.js 文件上，如下：</p>
<pre><code class="language-js">// webpack.config.js
const path = require('path')
module.exports = {
  entry: path.join(__dirname, '/src/index.js'), // 入口文件
  output: {
    path: path.join(__dirname, '/dist'), //打包后的文件存放的地方
    filename: 'bundle.js' //打包后输出文件的文件名
  },
  devServer: {
    contentBase: './dist', // 本地服务器所加载文件的目录
    port: '8088', // 设置端口号为8088
    inline: true, // 文件修改后实时刷新
    historyApiFallback: true //不跳转
  }
}
</code></pre>
<h4 id="toc_h4_11">5.2、package.json 文件中添加启动和打包命令</h4>
<p>package.json 文件修改如下</p>
<pre><code>{
  "name": "webpack-project",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "build": "webpack",
    "dev": "webpack-dev-server --open"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "webpack": "^4.23.1",
    "webpack-cli": "^3.1.2",
    "webpack-dev-server": "^3.1.10"
  }
}
</code></pre>
<p>这样我们就可以用以下命令进行本地运行或者打包文件了</p>
<ul>
<li>npm run dev 启动本地服务器，webpack-dev-server 就是启动服务器的命令，--open 是用于启动完服务器后自动打开浏览器。</li>
<li>npm run build 执行打包命令</li>
</ul>
<p>此时，我们只要输入 npm run dev 就可以在<a href="http://localhost:8088/中查看页面了。" target="_blank">http://localhost:8088/中查看页面了。</a></p>
<h3 id="toc_h3_12">6、配置常用 loader</h3>
<p>loader 可以让 webpack 能够去处理那些非 JavaScript 文件（webpack 自身只理解 JavaScript）。loader 可以将所有类型的文件转换为 webpack 能够处理的有效模块，然后你就可以利用 webpack 的打包能力，对它们进行处理。</p>
<p>Loaders 的配置包括以下几方面：</p>
<ul>
<li>test：一个用以匹配 loaders 所处理文件的拓展名的正则表达式（必须）</li>
<li>loader：loader 的名称（必须）</li>
<li>include/exclude：手动添加必须处理的文件（文件夹）或屏蔽不需要处理的文件（文件夹）（可选）；</li>
<li>options：为 loaders 提供额外的设置选项（可选）</li>
</ul>
<h4 id="toc_h4_13">配置 css-loader 和 sass-loader</h4>
<p>如果我们要加载一个 css 文件，需要安装配置 style-loader 和 css-loader。<br>
如果我们要使用 sass，就要配置 sass-loader 和 node-sass。</p>
<ul>
<li>css-loader：加载.css 文件</li>
<li>style-loader：使用 style 标签将 css-loader 内部样式注入到我们的 HTML 页面</li>
</ul>
<pre><code>const path = require('path')
module.exports = {
  entry: path.join(__dirname, '/src/index.js'), // 入口文件
  output: {
    path: path.join(__dirname, '/dist'), //打包后的文件存放的地方
    filename: 'bundle.js' //打包后输出文件的文件名
  },
  devServer: {
    contentBase: './dist', // 本地服务器所加载文件的目录
    port: '8088', // 设置端口号为8088
    inline: true, // 文件修改后实时刷新
    historyApiFallback: true //不跳转
  },
  module: {
    rules: [
      {
        test: /\.css$/, // 正则匹配以.css结尾的文件
        use: ['style-loader', 'css-loader']
      {
        test: /\.(scss|sass)$/, // 正则匹配以.scss和.sass结尾的文件
        use: ['style-loader', 'css-loader', 'sass-loader']
      }
    ]
  }
}
</code></pre>
<h4 id="toc_h4_14">配置 Babel-loader</h4>
<p>Babel 其实是一个编译 JavaScript 的平台，它可以编译代码帮你达到以下目的：</p>
<ul>
<li>让你能使用最新的 JavaScript 代码（ES6，ES7...）；</li>
<li>让你能使用基于 JavaScript 进行了拓展的语言，比如 React 的 JSX；</li>
</ul>
<pre><code>module: {
  ...
  rules: [
    {
      test: /\.js$/,
      loader: 'babel-loader',
      include: [resolve('src')]
    }
  ]
}
</code></pre>
<h4 id="toc_h4_15">处理图片</h4>
<p>处理图片资源时，我们常用的两种 loader 是 file-loader 或者 url-loader。<br>
当使用 url-loader 加载图片，图片小于上限值，则将图片转 base64 字符串，否则使用 file-loader 加载图片。</p>
<pre><code>module: {
  ...
  rules: [
    {
      test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,
      loader: 'url-loader',
      options: {
        limit: 10000,
        name: utils.assetsPath('img/[name].[hash:7].[ext]')
      }
    }
  ]
}
</code></pre>
<h3 id="toc_h3_16">7、配置常用插件</h3>
<p>loader 被用于转换某些类型的模块，而插件则可以用于执行范围更广的任务。插件的范围包括，从打包优化和压缩，一直到重新定义环境中的变量。插件接口功能极其强大，可以用来处理各种各样的任务。</p>
<h4 id="toc_h4_17">7.1、自动生成 html 文件(HtmlWebpackPlugin)</h4>
<p>现在我们都是使用一开始建好的 index.html 文件，然后手动引入 bundle.js，如果以后我们引入不止一个 js 文件，那就得更改 index.html 中的 js 文件名，所以能不能自动生成 index.html 且自动引用打包后的 js 呢？</p>
<p>HtmlWebpackPlugin 插件就是用来解决这个问题的：</p>
<ol>
<li>安装插件 npm i html-webpack-plugin -D</li>
<li>把 dist 文件夹清空</li>
<li>在根目录新建 index.html,内容和原来的 html 一致，只是不引入 js 文件。</li>
<li>webpack.config.js 中我们引入了 HtmlWebpackPlugin 插件</li>
</ol>
<pre><code>plugins: [
  new HtmlWebpackPlugin({
    filename: 'index.html',
    template: 'index.html',
    inject: true,
    minify: {
      removeComments: true,
      collapseWhitespace: true,
      removeAttributeQuotes: true
    }
  })
]
</code></pre>
<p>此时我们使用 npm run build 进行打包，你会发现，dist 文件夹和 html 文件都会自动生成。</p>
<h4 id="toc_h4_18">7.2、清理/dist 文件夹(CleanWebpackPlugin)</h4>
<p>在每次构建前清理/dist 文件夹，生产最新的打包文件，这时候就用到 CleanWebpackPlugin 插件了。</p>
<ol>
<li>安装 npm i clean-webpack-plugin -D</li>
<li>配置 webpack.config.js</li>
</ol>
<pre><code>plugins: [
  new HtmlWebpackPlugin({
    filename: 'index.html',
    template: 'index.html',
    inject: true,
    minify: {
      removeComments: true,
      collapseWhitespace: true,
      removeAttributeQuotes: true
    }
  }),
  new CleanWebpackPlugin(['dist'])
]
</code></pre>
<h4 id="toc_h4_19">7.3、热更新(HotModuleReplacementPlugin)</h4>
<p>我们要在修改代码后自动更新页面，这就需要 HotModuleReplacementPlugin（HMR）插件</p>
<ol>
<li>devServer 配置项中添加 hot: true 参数。</li>
<li>因为 HotModuleReplacementPlugin 是 webpack 模块自带的，所以引入 webpack 后，在 plugins 配置项中直接使用即可。</li>
</ol>
<pre><code class="language-js">plugins: [
  new HtmlWebpackPlugin({
    filename: 'index.html',
    template: 'index.html',
    inject: true,
    minify: {
      removeComments: true,
      collapseWhitespace: true,
      removeAttributeQuotes: true
    }
  }),
  new CleanWebpackPlugin(['dist'])
  new webpack.HotModuleReplacementPlugin()
]
</code></pre>
<h4 id="toc_h4_20">7.4、增加 css 前缀</h4>
<p>平时我们写 css 时，一些属性需要手动加上前缀，比如-webkit-border-radius: 10px;，在 webpack 中我们可以让他自动加上</p>
<ol>
<li>安装 npm i postcss-loader autoprefixer -D</li>
<li>在项目根目录下新建 postcss.config.js 文件</li>
</ol>
<pre><code class="language-js">module.exports = {
  plugins: [
    require('autoprefixer') // 引用autoprefixer模块
  ]
}
</code></pre>
<ol start="3">
<li>修改 webpack.config.js 文件中的 css-loader 配置</li>
</ol>
<pre><code class="language-js">module.exports = {
   ...
  module: {
    rules: [
      {
        test: /\.css$/, // 正则匹配以.css结尾的文件
        use: [
          { loader: 'style-loader' }, // 这里采用的是对象配置loader的写法
          { loader: 'css-loader' },
          { loader: 'postcss-loader' } // 使用postcss-loader
        ]
      }
       ...
    ]
  }
   ...
}
</code></pre>
<h4 id="toc_h4_21">7.5、css 分离 ExtractTextPlugin</h4>
<p>将 css 成生文件，而非内联。该插件的主要是为了抽离 css 样式,防止将样式打包在 js 中引起页面样式加载错乱的现象。</p>
<ol>
<li>安装 npm i extract-text-webpack-plugin@next -D</li>
<li>在 webpack.config.js 文件中引入并使用该插件：</li>
</ol>
<pre><code class="language-js">const ExtractTextPlugin = require('extract-text-webpack-plugin') //引入分离插件
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/, // 正则匹配以.css结尾的文件
        use: ExtractTextPlugin.extract({
          // 相当于回滚，经postcss-loader和css-loader处理过的css最终再经过style-loader处理
          fallback: 'style-loader',
          use: ['css-loader', 'postcss-loader']
        })
      }
    ]
  },
  plugins: [
    new ExtractTextPlugin('css/index.css') // 将css分离到/dist文件夹下的css文件夹中的index.css
  ]
}
</code></pre>
<p>此时运行 npm run build 后会发现/dist 文件夹内多出了/css 文件夹及 index.css 文件。</p>
<h4 id="toc_h4_22">7.6、消除冗余 css</h4>
<p>有时候我们 css 写得多了，可能会不自觉的写重复了一些样式，这就造成了多余的代码，以下方法可以优化</p>
<ol>
<li>安装 npm i purifycss-webpack purify-css glob -D</li>
<li>引入 clean-webpack-plugin 及 glob 插件并使用</li>
</ol>
<pre><code class="language-js">const PurifyCssWebpack = require('purifycss-webpack') // 引入PurifyCssWebpack插件
const glob = require('glob') // 引入glob模块,用于扫描全部html文件中所引用的css

plugins: [
  new PurifyCssWebpack({
    paths: glob.sync(path.join(__dirname, 'src/*.html')) // 同步扫描所有html文件中所引用的css
  })
]
</code></pre>
<h4 id="toc_h4_23">至此，一些常用的配置以及弄好了，现在就开始愉快地写代码了。</h4>
<h5 id="toc_h5_24">下面将讲述 webpack 的优化方法。以下的例子是由 vue-cli 脚手架搭建的项目，跟上述例子无关。</h5>
<p>————————————————————————————————————————————</p>
<h3 id="toc_h3_25">webpack 打包优化</h3>
<h4 id="toc_h4_26">为什么要优化打包？</h4>
<ul>
<li>项目越做越大，依赖包越来越多，打包文件太大</li>
<li>单页面应用首页白屏时间长，用户体验差</li>
</ul>
<h4 id="toc_h4_27">我们的目的</h4>
<ul>
<li>减小打包后的文件大小</li>
<li>首页按需引入文件</li>
<li>优化 webpack 打包时间</li>
</ul>
<h4 id="toc_h4_28">优化方式</h4>
<h4 id="toc_h4_29">1、 按需加载</h4>
<p>1.1 路由组件按需加载</p>
<pre><code class="language-js">const router = [
  {
    path: '/index',
    component: resolve =&gt; require.ensure([], () =&gt; resolve(require('@/components/index')))
  },
  {
    path: '/about',
    component: resolve =&gt; require.ensure([], () =&gt; resolve(require('@/components/about')))
  }
]
</code></pre>
<p>1.2 第三方组件和插件。按需加载需引入第三方组件</p>
<pre><code class="language-javascript">
// 引入全部组件
import ElementUI from  'element-ui'
import  'element-ui/lib/theme-chalk/index.css'
Vue.use(ElementUI)

// 按需引入组件
import { Button } from  'element-ui
Vue.component(Button.name, Button)
</code></pre>
<p>1.3 对于一些插件，如果只是在个别组件中用的到，也可以不要在 main.js 里面引入，而是在组件中按需引入</p>
<pre><code class="language-javascript">
// 在main.js引入
import Vue from vue
import Vuelidate from  'vuelidate'
Vue.use(Vuelidate)

// 按组件按需引入
import { Vuelidate } from  'vuelidate'

</code></pre>
<h4 id="toc_h4_30">2、优化 loader 配置</h4>
<ul>
<li>优化正则匹配</li>
<li>通过 cacheDirectory 选项开启缓存</li>
<li>通过 include、exclude 来减少被处理的文件。</li>
</ul>
<pre><code class="language-js">module: {
  rules: [
    {
      test: /\.js$/,
      loader: 'babel-loader?cacheDirectory',
      include: [resolve('src')]
    }
  ]
}
</code></pre>
<h4 id="toc_h4_31">3、优化文件路径——省下搜索文件的时间</h4>
<ul>
<li>extension 配置之后可以不用在 require 或是 import 的时候加文件扩展名,会依次尝试添加扩展名进行匹配。</li>
<li>alias 通过配置别名可以加快 webpack 查找模块的速度。</li>
</ul>
<pre><code class="language-js">  resolve: {
    extensions: ['.js', '.vue', '.json'],
    alias: {
      'vue$': 'vue/dist/vue.esm.js',
      '@': resolve('src'),
    }
  },
</code></pre>
<h4 id="toc_h4_32">4、生产环境关闭 sourceMap</h4>
<ul>
<li>sourceMap 本质上是一种映射关系，打包出来的 js 文件中的代码可以映射到代码文件的具体位置,这种映射关系会帮助我们直接找到在源代码中的错误。</li>
<li>打包速度减慢，生产文件变大，所以开发环境使用 sourceMap，生产环境则关闭。</li>
</ul>
<h4 id="toc_h4_33">5、代码压缩</h4>
<ul>
<li>UglifyJS: vue-cli 默认使用的压缩代码方式，它使用的是单线程压缩代码，打包时间较慢</li>
<li>ParallelUglifyPlugin: 开启多个子进程，把对多个文件压缩的工作分别给多个子进程去完成</li>
</ul>
<p>两种方法使用如下：</p>
<pre><code class="language-js">plugins: [
  new UglifyJsPlugin({
    uglifyOptions: {
      compress: {
        warnings: false
      }
    },
    sourceMap: true,
    parallel: true
  }),

  new ParallelUglifyPlugin({
    //缓存压缩后的结果，下次遇到一样的输入时直接从缓存中获取压缩后的结果并返回，
    //cacheDir 用于配置缓存存放的目录路径。
    cacheDir: '.cache/',
    sourceMap: true,
    uglifyJS: {
      output: {
        comments: false
      },
      compress: {
        warnings: false
      }
    }
  })
]
</code></pre>
<h4 id="toc_h4_34">6、提取公共代码</h4>
<ul>
<li>相同资源重复被加载，浪费用户流量，增加服务器成本。</li>
<li>每个页面需要加载的资源太大，导致网页首屏加载缓慢，影响用户体验。</li>
</ul>
<p>webpack3 使用 CommonsChunkPlugin 的实现：</p>
<pre><code class="language-js">plugins: [

  new webpack.optimize.CommonsChunkPlugin({
    name: 'vendor',
    minChunks: function(module, count) {
      console.log(module.resource, `引用次数${count}`)
      //"有正在处理文件" + "这个文件是 .js 后缀" + "这个文件是在 node_modules 中"
      return module.resource &amp;&amp; /\.js$/.test(module.resource) &amp;&amp; module.resource.indexOf(path.join(__dirname, './node_modules')) === 0
    }
  }),
  new webpack.optimize.CommonsChunkPlugin({
    name: 'common',
    chunks: 'initial',
    minChunks: 2
  })
]
</code></pre>
<p>webpack4 使用 splitChunks 的实现：</p>
<pre><code class="language-js">module.exports = {
  optimization: {
    splitChunks: {
      cacheGroups: {
        vendor: {
          priority: 1, //添加权重
          test: /node_modules/, //把这个目录下符合下面几个条件的库抽离出来
          chunks: 'initial', //刚开始就要抽离
          minChunks: 2 //重复2次使用的时候需要抽离出来
        },
        common: {
          //公共的模块
          chunks: 'initial',
          minChunks: 2
        }
      }
    }
  }
}
</code></pre>
<h4 id="toc_h4_35">7、CDN 优化</h4>
<ul>
<li>随着项目越做越大，依赖的第三方 npm 包越来越多，构建之后的文件也会越来越大。</li>
<li>再加上又是单页应用，这就会导致在网速较慢或者服务器带宽有限的情况出现长时间的白屏。</li>
</ul>
<p>1、将 vue、vue-router、vuex、element-ui 和 axios 这五个库，全部改为通过 CDN 链接获取，在 index.html 里插入 相应链接。</p>
<pre><code class="language-html">&lt;head&gt;
  &lt;link rel="stylesheet" href="https://cdn.bootcss.com/element-ui/2.0.7/theme-chalk/index.css" /&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="app"&gt;&lt;/div&gt;
  &lt;script src="https://cdn.bootcss.com/vue/2.6.10/vue.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.bootcss.com/axios/0.19.0-beta.1/axios.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.bootcss.com/vuex/3.1.0/vuex.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.bootcss.com/vue-router/3.0.2/vue-router.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.bootcss.com/element-ui/2.6.1/index.js"&gt;&lt;/script&gt;
  &lt;!-- built files will be auto injected --&gt;
&lt;/body&gt;
</code></pre>
<p>2、在 webpack.config.js 配置文件</p>
<pre><code class="language-js">module.exports = {
 ···
    externals: {
      'vue': 'Vue',
      'vuex': 'Vuex',
      'vue-router': 'VueRouter',
      'element-ui': 'ELEMENT',
      'Axios':'axios'
    }
  },
</code></pre>
<p>3、卸载依赖的 npm 包，npm uninstall axios element-ui vue vue-router vuex</p>
<p>4、修改 main.js 文件里之前的引包方式</p>
<pre><code class="language-js">// import Vue from 'vue'

// import ElementUI from 'element-ui'
// import 'element-ui/lib/theme-chalk/index.css'
// import VueRouter from 'vue-router'

import App from './App.vue'
import routes from './router'
import utils from './utils/Utils'

Vue.use(ELEMENT)
Vue.use(VueRouter)

const router = new VueRouter({
  mode: 'hash', //路由的模式
  routes
})

new Vue({
  router,
  el: '#app',
  render: h =&gt; h(App)
})
</code></pre>
<h4 id="toc_h4_36">8、使用 HappyPack 多进程解析和处理文件</h4>
<ul>
<li>由于运行在 Node.js 之上的 Webpack 是单线程模型的，所以 Webpack 需要处理的事情需要一件一件的做，不能多件事一起做。</li>
<li>HappyPack 就能让 Webpack 把任务分解给多个子进程去并发的执行，子进程处理完后再把结果发送给主进程。</li>
<li>HappyPack 对 file-loader、url-loader 支持的不友好，所以不建议对该 loader 使用。</li>
</ul>
<p>使用方法如下：</p>
<ol>
<li>HappyPack 插件安装： npm i -D happypack</li>
<li>webpack.base.conf.js 文件对 module.rules 进行配置</li>
</ol>
<pre><code class="language-js">module: {
  rules: [
    {
      test: /\.js$/,
      use: ['happypack/loader?id=babel'],
      include: [resolve('src'), resolve('test')],
      exclude: path.resolve(__dirname, 'node_modules')
    },
    {
      test: /\.vue$/,
      use: ['happypack/loader?id=vue']
    }
  ]
}
</code></pre>
<ol start="3">
<li>在生产环境 webpack.prod.conf.js 文件进行配置</li>
</ol>
<pre><code class="language-js">const HappyPack = require('happypack')
// 构造出共享进程池，在进程池中包含5个子进程
const HappyPackThreadPool = HappyPack.ThreadPool({ size: 5 })
plugins: [
  new HappyPack({
    // 用唯一的标识符id，来代表当前的HappyPack是用来处理一类特定的文件
    id: 'babel',
    // 如何处理.js文件，用法和Loader配置中一样
    loaders: ['babel-loader?cacheDirectory'],
    threadPool: HappyPackThreadPool
  }),
  new HappyPack({
    id: 'vue', // 用唯一的标识符id，来代表当前的HappyPack是用来处理一类特定的文件
    loaders: [
      {
        loader: 'vue-loader',
        options: vueLoaderConfig
      }
    ],
    threadPool: HappyPackThreadPool
  })
]
</code></pre>
<h3 id="toc_h3_37">总结</h3>
<ol>
<li>比较实用的方法: 按需加载，优化 loader 配置，关闭生产环境的 sourceMap，CDN 优化。</li>
<li>vue-cli 已做的优化： 代码压缩，提取公共代码，再优化空间不大。</li>
<li>根据项目实际需要和自身开发水平选择优化方法，必须避免因为优化产生 bug。</li>
</ol>
                        <div>
                            <hr>

标题：webpack——从构建项目到优化<br>
作者：<a href="https://ymfed.github.io" target="_blank">Michael-lzg</a><br>
地址：<a href="https://ymfed.github.io/articles/2019/07/17/1563358541278.html" target="_blank">https://ymfed.github.io/articles/2019/07/17/1563358541278.html</a><br>

<!-- 签名档内可使用 HTML、JavaScript -->
<br>
                        </div>
                </div>

                <footer class="tags">
                        <a class="tag" rel="tag" href="https://ymfed.github.io/tags/webpack">
                            webpack</a>
                        <a class="tag" rel="tag" href="https://ymfed.github.io/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96">
                            工程化</a>

                    <div class="rel fn-clear ft__center">
                            <a href="https://ymfed.github.io/articles/2019/07/05/1562324937961.html" rel="prev"
                               class="fn-left vditor-tooltipped vditor-tooltipped__n"
                               aria-label="Web Workers 干货！！">
                                旧一篇
                            </a>
                            <a href="https://ymfed.github.io/articles/2019/07/18/1563454497520.html" rel="next"
                               class="fn-right vditor-tooltipped vditor-tooltipped__n"
                               aria-label="CSS 渲染：CSS 是如何绘制颜色的？">
                                新一篇
                            </a>
                    </div>
                </footer>
                    <div id="b3logsolocomments"></div>
                    <div id="vcomment" data-name="Michael-lzg" data-postId="1563358541278"></div>
                <br>
                <div id="externalRelevantArticles" class="list"></div>
                <div id="relevantArticles" class="list"></div>
                <div id="randomArticles" class="list"></div>
            </article>
        </main>
<aside>
<ul class="article__toc">
        <li class="toc__h3">
            <a href="#toc_h3_0">webpack4 搭建一个项目</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_1">1、新建项目</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_2">2、安装 webpack</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_3">3、新建文件</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_4">3.1、 index.html 中写下 html 代码，它的作用是为了引入我们打包后的 js 文件：</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_5">3.2、在 hello.js 中导出一个模块：</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_6">3.3、在 index.js 中引入这个模块（hello.js）:</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_7">3.4、进行最简单的 webpack 打包</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_8">4、配置 webpack.config.js</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_9">5、构建本地服务器</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_10">5.1 webpack-dev-server 配置本地服务器</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_11">5.2、package.json 文件中添加启动和打包命令</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_12">6、配置常用 loader</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_13">配置 css-loader 和 sass-loader</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_14">配置 Babel-loader</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_15">处理图片</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_16">7、配置常用插件</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_17">7.1、自动生成 html 文件(HtmlWebpackPlugin)</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_18">7.2、清理/dist 文件夹(CleanWebpackPlugin)</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_19">7.3、热更新(HotModuleReplacementPlugin)</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_20">7.4、增加 css 前缀</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_21">7.5、css 分离 ExtractTextPlugin</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_22">7.6、消除冗余 css</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_23">至此，一些常用的配置以及弄好了，现在就开始愉快地写代码了。</a>
        </li>
        <li class="toc__h5">
            <a href="#toc_h5_24">下面将讲述 webpack 的优化方法。以下的例子是由 vue-cli 脚手架搭建的项目，跟上述例子无关。</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_25">webpack 打包优化</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_26">为什么要优化打包？</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_27">我们的目的</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_28">优化方式</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_29">1、 按需加载</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_30">2、优化 loader 配置</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_31">3、优化文件路径——省下搜索文件的时间</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_32">4、生产环境关闭 sourceMap</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_33">5、代码压缩</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_34">6、提取公共代码</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_35">7、CDN 优化</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_36">8、使用 HappyPack 多进程解析和处理文件</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_37">总结</a>
        </li>
</ul></aside>
    </div>
</div>
<footer class="footer fn-clear">
    &copy; 2020
    <a href="https://ymfed.github.io">亚美大前端（FED）</a>
    
    <br/>
    Powered by <a href="https://solo.b3log.org" target="_blank">YMFED</a>
    <span class="ft-warn">&heartsuit;</span>
    Theme
    <sup>[<a href="javascript:;" target="_blank">ref</a>]</sup>
    by <a href="javascript:;" target="_blank">亚美Web团队</a>
</footer>
<div class="icon-up" onclick="Util.goTop()"></div>
<script>
  var Label = {
    servePath: "https://ymfed.github.io",
    staticServePath: "https://ymfed.github.io",
    luteAvailable: false,
    hljsStyle: 'github',
    langLabel: "zh_CN",
    version: "3.9.0",
    staticSite: true,
    showCodeBlockLn: false,
  }
</script>
<script src="https://ymfed.github.io/skins/9IPHP/js/common.min.js?1585645466987"></script>
<link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/kanbanniang@0.2.6/index.css"/>
<script async src="https://cdn.jsdelivr.net/npm/kanbanniang@0.2.6/index.js"></script>
<div class="solo-kanbanniang">
    <div class="solo-kanbanniang__tip"></div>
    <canvas id="soloKanbanniang" width="280" height="250"></canvas>
    <div class="solo-kanbanniang__tool">
        <svg id="soloKanbanniangHome" viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M32 18.967l-16-12.42-16 12.42v-5.064l16-12.42 16 12.42zM28 18.516v12h-8v-8h-8v8h-8v-12l12-9z"></path>
        </svg>
        <svg id="soloKanbanniangRSS" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M320.364 768q0 45.728-32 77.728t-77.728 32-77.728-32-32-77.728 32-77.728 77.728-32 77.728 32 32 77.728zM612.94 838.272q1.152 16-9.728 27.424-10.272 12-26.848 12h-77.152q-14.272 0-24.576-9.44t-11.424-23.712q-12.576-130.848-105.44-223.712t-223.712-105.44q-14.272-1.152-23.712-11.424t-9.44-24.576V402.24q0-16.576 12-26.848 9.728-9.728 24.576-9.728h2.848q91.424 7.424 174.848 46.016t148 103.712q65.152 64.576 103.712 148t46.016 174.848z m292.576 1.152q1.152 15.424-10.272 26.848-10.272 11.424-26.272 11.424h-81.728q-14.848 0-25.44-10.016t-11.136-24.288q-6.848-122.848-57.728-233.44t-132.288-192-192-132.288-233.44-58.272q-14.272-0.576-24.288-11.136t-10.016-24.864V109.664q0-16 11.424-26.272 10.272-10.272 25.152-10.272h1.728q149.728 7.424 286.56 68.576t243.136 168q106.848 106.272 168 243.136t68.576 286.56z"></path>
        </svg>
        <svg id="soloKanbanniangChat" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M802.42709 96.163153H219.476155c-84.48109 0-154.896836 71.746044-154.896836 157.840888v393.119449c0 86.072331 70.415746 157.819398 154.896836 157.819399h214.038818V925.470963s22.526039 40.168862 64.767096 5.734608c30.965246-25.819039 126.721123-91.828428 171.775248-123.385145h132.369773c84.502579 0 154.896836-83.21526 154.896836-157.839865V251.125481c0-86.094844-70.394257-154.962328-154.896836-154.962328zM301.144176 518.002714c-39.427988 0-70.416769-31.576159-70.416769-71.746044 0-40.168862 30.988782-71.746044 70.416769-71.746044 39.426965 0 70.393233 31.577183 70.393234 71.746044 0 40.169885-30.966269 71.746044-70.393234 71.746044z m208.411657 0c-39.450501 0-70.415746-31.576159-70.415746-71.746044 0-40.168862 30.965246-71.746044 70.415746-71.746044 39.405475 0 70.394257 31.577183 70.394257 71.746044 0 40.169885-30.988782 71.746044-70.394257 71.746044z m211.203236 0c-39.426965 0-70.416769-31.576159-70.416769-71.746044 0-40.168862 30.988782-71.746044 70.416769-71.746044s70.415746 31.577183 70.415746 71.746044c-0.001023 40.169885-30.988782 71.746044-70.415746 71.746044z"></path>
        </svg>
        <svg id="soloKanbanniangChange" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M936.672 193.216l-226.88-64c-8.704-2.528-18.112-1.12-25.824 3.776-7.68 4.864-12.896 12.736-14.432 21.728C655.712 236.928 595.328 288 512 288c-71.424 0-142.464-103.296-163.776-143.104-7.136-13.28-22.528-19.84-37.024-15.68l-224 64C73.472 197.152 64 209.728 64 224v256a31.93 31.93 0 0 0 11.712 24.736c7.392 6.08 17.152 8.512 26.56 6.624L224 487.04V832c0 52.928 43.072 96 96 96h384c52.928 0 96-43.072 96-96V519.04l121.728 24.352c9.44 1.92 19.2-0.544 26.56-6.624C955.68 530.656 960 521.6 960 512V224c0-14.336-9.536-26.912-23.328-30.784zM672 800H352c-17.664 0-32-14.304-32-32s14.336-32 32-32h320c17.696 0 32 14.304 32 32s-14.304 32-32 32z"></path>
        </svg>
        <svg id="soloKanbanniangPhoto" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M898.048 258.048q23.552-1.024 46.592 9.216t40.96 27.136 28.672 39.424 10.752 46.08l0 390.144q0 24.576-10.752 47.104t-28.672 40.448-40.96 28.16-47.616 10.24l-697.344 0q-24.576 0-48.64-10.24t-42.496-27.648-29.696-40.448-11.264-48.64l0-381.952q0-22.528 10.752-45.568t28.672-41.472 39.936-30.208 44.544-11.776l63.488 0 13.312-83.968q3.072-20.48 18.432-32.768t34.816-12.288l456.704 0q19.456 0 34.304 10.752t16.896 34.304l14.336 83.968 54.272 0zM548.864 712.704q40.96 0 77.824-15.872t63.488-42.496 42.496-62.976 15.872-77.312-15.872-77.312-42.496-62.976-63.488-42.496-77.824-15.872-77.312 15.872-63.488 42.496-43.008 62.976-15.872 77.312 15.872 77.312 43.008 62.976 63.488 42.496 77.312 15.872z"></path>
        </svg>
        <svg id="soloKanbanniangGithub" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M1024 524.8c0 114.346667-32.554667 217.216-97.706667 308.565333-65.066667 91.306667-149.162667 154.538667-252.288 189.610667-11.989333 2.304-20.778667 0.682667-26.325333-4.778667a27.605333 27.605333 0 0 1-8.362667-20.48v-144.213333c0-44.16-11.52-76.501333-34.645333-97.024 25.344-2.730667 48.085333-6.826667 68.309333-12.288a268.629333 268.629333 0 0 0 62.72-26.666667 187.434667 187.434667 0 0 0 53.973334-45.44c14.421333-18.005333 26.197333-41.898667 35.328-71.765333 9.088-29.824 13.653333-64.128 13.653333-102.826667 0-55.125333-17.536-102.058667-52.650667-140.8 16.426667-41.429333 14.677333-87.893333-5.333333-139.392-12.458667-4.096-30.464-1.578667-54.016 7.509334a355.328 355.328 0 0 0-61.312 30.08L640 271.274667a462.336 462.336 0 0 0-128-17.749334c-43.989333 0-86.656 5.930667-128 17.749334a589.824 589.824 0 0 0-28.330667-18.432c-11.776-7.253333-30.336-16.042667-55.68-26.325334-25.344-10.24-44.416-13.312-57.301333-9.216-19.584 51.498667-21.12 97.962667-4.693333 139.434667-35.114667 38.698667-52.650667 85.632-52.650667 140.757333 0 38.698667 4.565333 72.874667 13.653333 102.485334 9.130667 29.610667 20.778667 53.546667 34.986667 71.765333 14.250667 18.218667 32.128 33.493333 53.674667 45.781333 21.546667 12.288 42.453333 21.205333 62.677333 26.666667 20.224 5.461333 43.008 9.557333 68.309333 12.288-17.749333 16.384-28.629333 39.850667-32.64 70.4a130.005333 130.005333 0 0 1-29.994666 10.24c-10.666667 2.261333-23.338667 3.413333-37.973334 3.413333-14.72 0-29.269333-4.906667-43.690666-14.677333-14.464-9.813333-26.794667-24.064-36.992-42.709333a109.226667 109.226667 0 0 0-32.341334-35.541334c-13.141333-9.130667-24.106667-14.592-33.024-16.426666l-13.312-2.048c-9.344 0-15.786667 1.024-19.328 3.072-3.584 2.090667-4.693333 4.693333-3.328 7.893333 1.28 3.157333 3.328 6.4 5.973334 9.557333 2.688 3.2 5.546667 5.930667 8.661333 8.192l4.693333 3.413334c9.770667 4.565333 19.413333 13.226667 29.013334 25.984 9.514667 12.757333 16.512 24.362667 20.992 34.858666l6.656 15.701334c5.76 17.322667 15.530667 31.317333 29.312 42.026666 13.781333 10.666667 28.672 17.536 44.672 20.48 16 2.986667 31.445333 4.565333 46.336 4.821334 14.890667 0.213333 27.221333-0.597333 36.992-2.389334l15.36-2.730666c0 17.28 0.085333 37.546667 0.298666 60.8l0.341334 36.906666a27.050667 27.050667 0 0 1-8.661334 20.48c-5.76 5.461333-14.677333 7.082667-26.666666 4.778667-103.125333-35.072-187.221333-98.261333-252.330667-189.610667C32.554667 742.058667 0 639.146667 0 524.8c0-95.232 22.869333-183.04 68.693333-263.466667A516.266667 516.266667 0 0 1 254.976 70.4C333.44 23.466667 419.114667 0 512 0c92.885333 0 178.56 23.466667 256.981333 70.4a516.266667 516.266667 0 0 1 186.368 190.976C1001.130667 341.802667 1024 429.653333 1024 524.842667z"></path>
        </svg>
        <svg id="soloKanbanniangClose" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M517.572566143763 1018.6748601482986C238.26554897656422 1018.6748601482986 11.897910175114305 792.2714997690043 11.897910175114305 513.0002041796496c0-279.3070171671984 226.36763880144977-505.71037754649296 505.6746559686481-505.71037754649296 279.2712955893538 0 505.6746559686481 226.40336037929444 505.6746559686481 505.71037754649296C1023.2472221124112 792.2714997690043 796.8795833109612 1018.6748601482986 517.572566143763 1018.6748601482986zM754.7281214542927 339.25044954334646c13.752807470184345-13.752807470184345 9.680547595895998-40.186775075214015-9.073280772537204-58.94060344364717l-2.143294670678079-2.1075730928334457c-18.7538283684332-18.7538283684332-45.15207439561819-22.861809820566194-58.90488186580257-9.073280772537204l-168.21291007038468 168.24863164822932-180.42968969324974-180.46541127109438c-13.967136937252159-13.967136937252159-40.72259874288353-9.823433907274534-59.72647815622916 9.216167083915742l-2.143294670678079 2.143294670678079c-19.039600991190277 19.003879413345654-23.111860865478626 45.75934121897699-9.180445506071107 59.655035000539876l180.42968969324974 180.46541127109438-176.07165719620428 176.03593561835962c-13.788529048028984 13.824250625873615-9.716269173740633 40.151053497369375 9.073280772537204 58.94060344364717l2.1075730928334457 2.1075730928334457c18.7538283684332 18.7538283684332 45.15207439561819 22.897531398410823 58.90488186580257 9.073280772537204l176.10737877404887-176.10737877404887 170.39192631890742 170.42764789675192c13.967136937252159 13.931415359407513 40.686877165038865 9.85915548511917 59.690756578384516-9.180445506071107l2.1790162485227142-2.1790162485227142c19.039600991190277-18.968157835501014 23.147582443323273-45.72361964113239 9.180445506071107-59.690756578384516l-170.39192631890742-170.42764789675192L754.7281214542927 339.25044954334646z"></path>
        </svg>
    </div>
</div>

<script type="text/javascript">
    Util.addScript('https://ymfed.github.io/js/page.min.js?1585645466987', 'soloPageScript')
    var page = new Page({
        "commentContentCannotEmptyLabel": "评论内容只能为 2 到 500 个字符！",
        "oId": "1563358541278",
        "blogHost": "https://ymfed.github.io",
        "randomArticles1Label": "随机阅读：",
        "externalRelevantArticles1Label": "站外相关阅读："
    });
    $(document).ready(function () {
        page.load();
    page.tips.externalRelevantArticlesDisplayCount = "0";
    Skin.initToc()
    page.share()
    });
</script>
</body>
</html>

<!-- Generated by Latke (https://github.com/88250/latke) in 37ms, 2020/06/24 15:11:34 -->